<!DOCTYPE html>

<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->

<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->

<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->

<!-- BEGIN HEAD -->

<head>

<meta charset="utf-8" />

<title>新增学员-学员管理-驾考联盟后台管理系统</title>

<meta content="width=device-width, initial-scale=1.0" name="viewport" />

<meta content="" name="description" />

<meta content="" name="author" />

<!-- BEGIN GLOBAL MANDATORY STYLES -->

<link href="../media/css/bootstrap.min.css" rel="stylesheet"
	type="text/css" />

<link href="../media/css/bootstrap-responsive.min.css" rel="stylesheet"
	type="text/css" />

<link href="../media/css/font-awesome.min.css" rel="stylesheet"
	type="text/css" />

<link href="../media/css/style-metro.css" rel="stylesheet"
	type="text/css" />

<link href="../media/css/style.css" rel="stylesheet" type="text/css" />

<link href="../media/css/style-responsive.css" rel="stylesheet"
	type="text/css" />

<link href="../media/css/default.css" rel="stylesheet" type="text/css"
	id="style_color" />

<link href="../media/css/uniform.default.css" rel="stylesheet"
	type="text/css" />

<!-- END GLOBAL MANDATORY STYLES -->

<!-- BEGIN PAGE LEVEL STYLES -->

<!-- <link rel="stylesheet" type="text/css"
	href="../media/css/select2_metro.css" /> -->
<link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/css/select2.min.css" rel="stylesheet" />

<link rel="stylesheet" href="../media/css/DT_bootstrap.css" />

<!-- END PAGE LEVEL STYLES -->

<link rel="shortcut icon" href="../media/image/favicon.ico" />
<link href="../media/css/validationEngine.jquery.css" rel="stylesheet" type="text/css">
</head>

<!-- END HEAD -->

<!-- BEGIN BODY -->

<body class="page-header-fixed">

	<!-- BEGIN HEADER -->

	<div class="header navbar navbar-inverse navbar-fixed-top">

		<!-- BEGIN TOP NAVIGATION BAR -->

		<div class="navbar-inner">


		</div>

		<!-- END TOP NAVIGATION BAR -->

	</div>

	<!-- END HEADER -->

	<!-- BEGIN CONTAINER -->

	<div class="page-container row-fluid">

		<!-- 开始侧边栏 -->

		<div class="page-sidebar nav-collapse collapse">

			<!-- 开始 左侧通用 菜单 -->
			<!-- END SIDEBAR MENU -->

		</div>

		<!-- 结束侧边栏 -->

		<!-- BEGIN PAGE -->

		<div class="page-content">

			<!-- BEGIN SAMPLE PORTLET CONFIGURATION MODAL FORM-->

			<div id="portlet-config" class="modal hide">

				<div class="modal-header">

					<button data-dismiss="modal" class="close" type="button"></button>

					<h3>portlet Settings</h3>

				</div>

				<div class="modal-body">

					<p>Here will be a configuration form</p>

				</div>

			</div>

			<!-- END SAMPLE PORTLET CONFIGURATION MODAL FORM-->

			<!-- BEGIN PAGE CONTAINER-->

			<div class="container-fluid">

				<!-- BEGIN PAGE HEADER-->

				<div class="row-fluid">

					<div class="span12">

						<!-- BEGIN STYLE CUSTOMIZER -->

						<div class="color-panel hidden-phone">

							<div class="color-mode-icons icon-color"></div>

							<div class="color-mode-icons icon-color-close"></div>

							<div class="color-mode">

								<p>更改后台颜色</p>

								<ul class="inline">

									<li class="color-black current color-default"
										data-style="default"></li>

									<li class="color-blue" data-style="blue"></li>

									<li class="color-brown" data-style="brown"></li>

									<li class="color-purple" data-style="purple"></li>

									<li class="color-grey" data-style="grey"></li>

									<li class="color-white color-light" data-style="light"></li>

								</ul>



							</div>

						</div>

						<!-- END BEGIN STYLE CUSTOMIZER -->

						<!-- BEGIN PAGE TITLE & BREADCRUMB-->

						<h3 class="page-title">
							新增学员<small>增加学员</small>

						</h3>

						<ul class="breadcrumb">

							<li><i class="icon-home"></i> <a href="../main.jsp">后台首页</a>

								<i class="icon-angle-right"></i></li>

							<li><a href="students_view_list.html">学员管理</a> <i
								class="icon-angle-right"></i></li>

							<li><a href="#">新增学员</a></li>

						</ul>

						<!-- END PAGE TITLE & BREADCRUMB-->

					</div>

				</div>

				<div class="portlet box blue">

					<div class="portlet-title">

						<div class="caption">
							<i class="icon-cogs"></i>批量增加学员
						</div>

						<div class="actions" style="margin-left:15px;"></div>
						<div class="tools">



							<a href="javascript:void(0);" class="reload" onclick="$('#form').validationEngine('hideAll');"></a>




						</div>

					</div>

					<div class="portlet-body">
						<h3 class="form-section">批量增加学员</h3>

						<form action="../rest/studentBasicInfo/batchAddStudentInfo" 
						enctype="multipart/form-data" method="post" class="form-horizontal" target="formIframe" 
							onsubmit="return validate();">
							<div class="control-group">
								<label class="control-label">上传文件</label>
								<div class="controls">
									<input type="file" class="default" name="file" onchange="checkFileExt(this);"/>
									<span id="fileError" style="color:red;display:none;"></span>
									<span class="help-inline">
										注：下载上传模板</span>
								</div>
							</div>
							<!-- <button type="submit" style="margin-left:100px;" href="#myModal1"
								role="button" data-toggle="modal" class="btn blue">上传</button> -->
							<button type="submit" style="margin-left:100px;"
								role="button"  class="btn blue">上传</button>


							<button type="button" class="btn">取消</button>
						</form>

						<!--批量上传学员-->
						<div id="myModal1" class="modal hide fade" tabindex="-1"
							role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true">
							<div class="modal-header">
								<h3 id="myModalLabel1">批量上传学员</h3>
							</div>
							<div class="modal-body">
								<p>正在上传请稍等！</p>
								<p>
									学员上传成功！<a href="students_view_list.html">点此查看学员列表</a>
								</p>
								<p>以下学员上传不成功，原因身份证重复，请检查！</p>
								<p>刘新华 41142319841029553X</p>
								<p>刘新生 411423198410295530</p>
							</div>
							<div class="modal-footer">
								<button class="btn" data-dismiss="modal" aria-hidden="true">关闭</button>
							</div>
						</div>





					</div>

				</div>



				<div class="portlet box blue">

					<div class="portlet-title">

						<div class="caption">
							<i class="icon-cogs"></i>手动增加学员
						</div>

						<div class="actions" style="margin-left:15px;"></div>
						<div class="tools">



							<a href="javascript:;" class="reload" onclick="$('#form').validationEngine('hideAll');"></a>




						</div>

					</div>
					
					<div class="portlet-body">
						<h3 class="form-section">学员基本信息</h3>
						<form action="../rest/studentBasicInfo/handleWithPhoto" class="form-horizontal" id="form" 
						method="post" enctype="multipart/form-data" target="formIframe">

							<div class="control-group">

								<label class="control-label">所属驾校</label>

								<div class="controls">
									<div id="selectSchoolDiv" style="display: none">
										<select class="validate[required] medium m-wrap" tabindex="1"
											data-placeholder="请选择驾校" id="selectSchool" onchange="document.getElementById('setSchoolId').value=this.value;">
											<!-- <option value="0">未选择驾校</option> -->
										</select> 
									</div>
									<label id="setSchoolName"  style="display:none; font-size:1.25em;margin-right:10px;cursor: default;"></label>
									<input type="hidden" name="school_id" id="setSchoolId">
								</div>

							</div>

							<div class="control-group">

								<label class="control-label">学员姓名<span class="required">*</span></label>

								<div class="controls">

									<input type="text" placeholder="学员姓名" class="validate[required, maxSize[10]] m-wrap medium" name="student_name" />

									<span class="help-inline">学员姓名</span>

								</div>

							</div>




							<div class="control-group">

								<label class="control-label">性别</label>

								<div class="controls">
									<label class="radio"> <input type="radio"
										name="student_gender" value="0" checked /> 男
									</label> <label class="radio"> <input type="radio"
										name="student_gender" value="1" /> 女

									</label>
								</div>

							</div>

							<div class="control-group">

								<label class="control-label">当前科目</label>

								<div class="controls">
									<label class="radio"><input type="radio"
										name="subject" value="0" />未报名</label> <label
										class="radio"><input type="radio"
										name="subject" value="1" />科一</label> <label
										class="radio"><input type="radio"
										name="subject" value="2" checked />科二</label> <label
										class="radio"><input type="radio"
										name="subject" value="3" />科三</label> <label
										class="radio"><input type="radio"
										name="subject" value="4" />科四</label> <label
										class="radio"><input type="radio"
										name="subject" value="5" />拿证</label>
								</div>

							</div>








							<div class="control-group">

								<label class="control-label">驾证类型</label>

								<div class="controls">

									<label class="radio"><input type="radio"
										name="driving_license_type" value="0" checked />C1</label> <label
										class="radio"><input type="radio"
										name="driving_license_type" value="1" />C2</label> <label
										class="radio"><input type="radio"
										name="driving_license_type" value="2" />B1</label>

								</div>

							</div>
							<div class="control-group">

								<label class="control-label">当前状态</label>

								<div class="controls">

									<label class="radio"> <input type="radio"
										name="validation" value="0" /> 暂停

									</label> <label class="radio"> <input type="radio"
										name="validation" value="1" checked /> 有效

									</label>
								</div>

							</div>

							<div class="control-group">

								<label class="control-label">照片</label>

								<div class="controls">
									<div class="fileupload-new thumbnail" id="preview"
										style="width: 200px; height: 200px;">
										<img src="../media/image/profile.jpg" alt="教练头像"
											style="width:100%;height:100%;">
									</div>
									<input type="file" class="default" name="student_photo" onchange="previewImage(this)" />

								</div>

							</div>

							<div class="control-group">


								<h3 class="form-section" style="margin-top:15px;">学员登录信息</h3>
								<label>注意：添加后的信息不能修改</label>
								<div class="control-group">

									<label class="control-label">身份证号<span class="required">*</span></label>

									<div class="controls">

										<input type="text" class="validate[required, maxSize[18]] span6 m-wrap" name="identity_card_no" /> <span
											class="help-inline">身份证号字母不区分大小写</span>

									</div>

								</div>
								<div class="control-group">

									<label class="control-label">手机号<span class="required">*</span></label>

									<div class="controls">

										<input type="text" class="validate[required, maxSize[11], custom[phone]] span6 m-wrap" name="student_phone" /> <span
											class="help-inline">手机号为用户名</span>

									</div>

								</div>

								<div class="control-group">

									<label class="control-label">密码<span class="required">*</span></label>

									<div class="controls">

										<input type="password" class="validate[required, maxSize[20], minSize[6]] span6 m-wrap" name="login_pwd"
											id="pwd" /> <span class="help-inline">输入密码</span>

									</div>

								</div>

								<div class="control-group">

									<label class="control-label">重复密码<span class="required">*</span></label>

									<div class="controls">

										<input type="password" class="validate[equals[pwd]] span6 m-wrap" id="repwd"/>

										<span class="help-inline">再输入一次</span>

									</div>

								</div>

								<div class="control-group">

									<label class="control-label">预留码</label>

									<div class="controls">

										<input type="text" class="validate[maxSize[20]] span6 m-wrap" name="obligate_code" /> <span
											class="help-inline">输入您的预留码</span>

									</div>

								</div>

							</div>
							<button type="submit" style="margin-left:100px;" class="btn blue">添加</button>
							<button type="button" class="btn" onclick="$('#form').validationEngine('hideAll')">取消</button>
						</form>
					</div>

				</div>

				<!-- END PAGE CONTENT-->

			</div>

			<!-- END PAGE CONTAINER-->

		</div>

		<!-- END PAGE -->

	</div>

	<!-- END CONTAINER -->

	<!-- BEGIN FOOTER -->

	<div class="footer">

		<div class="footer-inner">2013 &copy; HenanZhonghe Inc.</div>

		<div class="footer-tools">

			<span class="go-top"> <i class="icon-angle-up"></i>

			</span>

		</div>
	</div>
	<iframe style="display:none;" name="formIframe"></iframe>
	<!-- END FOOTER -->

	<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->

	<!-- BEGIN CORE PLUGINS -->

	<script src="../media/js/jquery-1.10.1.min.js" type="text/javascript"></script>

	<script src="../media/js/jquery-migrate-1.2.1.min.js"
		type="text/javascript"></script>

	<!-- IMPORTANT! Load jquery-ui-1.10.1.custom.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->

	<script src="../media/js/jquery-ui-1.10.1.custom.min.js"
		type="text/javascript"></script>

	<script src="../media/js/bootstrap.min.js" type="text/javascript"></script>

	<!--[if lt IE 9]>

	<script src="media/js/excanvas.min.js"></script>

	<script src="media/js/respond.min.js"></script>  

	<![endif]-->

	<script src="../media/js/jquery.slimscroll.min.js"
		type="text/javascript"></script>

	<script src="../media/js/jquery.blockui.min.js" type="text/javascript"></script>

	<script src="../media/js/jquery.cookie.min.js" type="text/javascript"></script>

	<script src="../media/js/jquery.uniform.min.js" type="text/javascript"></script>

	<!-- END CORE PLUGINS -->

	<!-- BEGIN PAGE LEVEL PLUGINS -->

	<!-- <script type="text/javascript" src="../media/js/select2.min.js"></script> -->

	<script type="text/javascript"
		src="../media/js/jquery.dataTables.min.js"></script>

	<script type="text/javascript" src="../media/js/DT_bootstrap.js"></script>

	<!-- END PAGE LEVEL PLUGINS -->

	<!-- BEGIN PAGE LEVEL SCRIPTS -->

	<script src="../media/js/app.js"></script>
	<script src="../media/js/picPreview.js"></script>
	<script src="../media/js/table-advanced.js"></script>
	<script type="text/javascript" src="../media/js/jquery.validationEngine-zh_CN.js"></script>
	<script type="text/javascript" src="../media/js/jquery.validationEngine.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/js/select2.min.js"></script>
	<script>

		jQuery(document).ready(function() {       

		   App.init();

		   //TableAdvanced.init();
		   $('#form').validationEngine();
		   var school_id = $('#school_id').val();
		   if(school_id != 0){
			   $('#setSchoolName').css('display', 'inline').html($('#school_name').val());
			   $('#setSchoolId').val(school_id);
		   }else{
			   $('#selectSchoolDiv').css('display', 'block');
			   selectSchool();
		   }
		});
		function selectSchool(){
			var dataArray = new Array();
			   $.ajax({
				   url: '../rest/schoolInfo/getAll',
				   type: 'get',
				   dataType: 'json',
				   success: function(data){
					   if(data.length != 0){
						   for(i in data){
								 dataArray[i]  = new Object();
								 dataArray[i].id = data[i].school_id;
								 dataArray[i].text = data[i].school_name;
							 }
						   $('#selectSchool').select2({
								  data: dataArray
							   });
						   document.getElementById('setSchoolId').value = dataArray[0].id;
					   }
				   },
				   error: function(xhr, err){
					   alert('加载驾校信息出错');
				   }
			   });
		}
		window.onload = function(){
			//getStaticInfo();
			//alert($('#school_id').val());
		};
		function checkFileExt(file){
			var extArray = file.value.match(/\.[A-z]*/g);
			var ext;
			if(extArray != null && extArray.length != 0){
				ext = extArray[extArray.length-1];
				if(ext != '.xls' && ext != '.xlsx'){
					$('#fileError').html('选择的文件错误，请重新选择').css('display', 'inline');
				}else{
					$('#fileError').html('').css('display', 'none');
				}
			}else{
				$('#fileError').html('选择的文件错误，请重新选择').css('display', 'inline');
			}
		}
		function validate(){
			console.log(document.getElementsByName('file')[0].value == '');
			if(document.getElementsByName('file')[0].value == ''){
				$('#fileError').html('请选择一个文件！').css('display', 'inline');
				return false;
			}
			if($('#fileError').css('display') == 'inline')
				return false;
			return true;
		}
	</script>

</body>

<!-- END BODY -->

</html>